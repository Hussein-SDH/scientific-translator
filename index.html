<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المترجم العلمي - الممرض حسين صباح ضيول</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Cairo', sans-serif; }
        body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%); min-height: 100vh; }
        .glass { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(12px); border: 1px solid rgba(148, 163, 184, 0.2); }
        .input-field { background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(148, 163, 184, 0.3); color: #f1f5f9; }
        .input-field:focus { border-color: #0ea5e9; outline: none; box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2); }
        .btn-primary { background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(14, 165, 233, 0.4); }
        .translation-row { border-right: 4px solid #0ea5e9; background: rgba(30, 41, 59, 0.5); }
        .spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .notification { position: fixed; top: 100px; left: 50%; transform: translateX(-50%) translateY(-100px); padding: 1rem 2rem; border-radius: 0.75rem; color: white; font-weight: 600; z-index: 200; transition: transform 0.3s ease; }
        .notification.show { transform: translateX(-50%) translateY(0); }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="glass fixed top-0 left-0 right-0 z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl flex items-center justify-center">
                    <i class="fas fa-microscope text-white text-xl"></i>
                </div>
                <div>
                    <h1 class="text-white text-xl font-bold">المترجم العلمي</h1>
                    <p class="text-slate-400 text-xs">الممرض حسين صباح ضيول</p>
                </div>
            </div>
        </div>
    </nav>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Loading -->
    <div id="loading" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 hidden items-center justify-center">
        <div class="glass rounded-2xl p-8 text-center">
            <div class="spinner w-16 h-16 border-4 border-sky-500/30 border-t-sky-500 rounded-full mx-auto mb-4"></div>
            <p class="text-xl">جاري الترجمة...</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-28 pb-12 px-4">
        <!-- Hero -->
        <section class="text-center mb-10">
            <div class="w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-sky-500 to-blue-600 rounded-full flex items-center justify-center">
                <i class="fas fa-user-md text-white text-3xl"></i>
            </div>
            <h2 class="text-4xl font-bold mb-2">المترجم العلمي المتقدم</h2>
            <p class="text-sky-400 text-lg mb-2">للممرض حسين صباح ضيول</p>
            <p class="text-slate-400">ترجمة علمية دقيقة من أي لغة إلى العربية</p>
        </section>

        <!-- Translation Interface -->
        <section class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                
                <!-- Input -->
                <div class="glass rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold"><i class="fas fa-file-medical text-sky-400 ml-2"></i>النص المصدر</h3>
                        <div class="flex items-center gap-2">
                            <span class="text-slate-400 text-sm">من:</span>
                            <select id="sourceLang" class="input-field rounded-lg px-3 py-2 text-sm">
                                <option value="en">English</option>
                                <option value="fr">Français</option>
                                <option value="es">Español</option>
                                <option value="de">Deutsch</option>
                                <option value="it">Italiano</option>
                                <option value="ru">Русский</option>
                                <option value="zh">中文</option>
                                <option value="ja">日本語</option>
                                <option value="tr">Türkçe</option>
                            </select>
                        </div>
                    </div>

                    <textarea id="inputText" placeholder="اكتب النص هنا..." 
                        class="w-full h-40 input-field rounded-xl p-4 resize-none mb-3"></textarea>
                    
                    <div class="flex items-center justify-between mb-4">
                        <span id="wordCount" class="text-slate-400 text-sm">0 كلمة</span>
                        <button onclick="clearText()" class="text-red-400 text-sm hover:text-red-300">
                            <i class="fas fa-trash ml-1"></i>مسح
                        </button>
                    </div>

                    <!-- File Upload -->
                    <div class="border-t border-slate-700 pt-4">
                        <div id="dropZone" onclick="document.getElementById('fileInput').click()" 
                            class="border-2 border-dashed border-slate-600 rounded-xl p-6 text-center cursor-pointer hover:border-sky-500 hover:bg-sky-500/10 transition-all">
                            <i class="fas fa-cloud-upload-alt text-sky-400 text-2xl mb-2"></i>
                            <p class="text-white">اسحب الملفات هنا أو انقر</p>
                            <p class="text-slate-400 text-sm">PDF, DOC, TXT, JPG, PNG</p>
                            <input type="file" id="fileInput" class="hidden" multiple onchange="handleFiles(this.files)">
                        </div>
                        <div id="fileList" class="mt-3 space-y-2"></div>
                    </div>

                    <button onclick="translateText()" id="translateBtn" 
                        class="w-full mt-4 py-3 btn-primary rounded-xl font-bold flex items-center justify-center gap-2">
                        <i class="fas fa-language"></i>ترجم الآن
                    </button>
                </div>

                <!-- Output -->
                <div class="glass rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold"><i class="fas fa-language text-sky-400 ml-2"></i>الترجمة العربية</h3>
                        <div class="flex items-center gap-2">
                            <span class="text-slate-400 text-sm">إلى:</span>
                            <select id="targetLang" class="input-field rounded-lg px-3 py-2 text-sm">
                                <option value="ar" selected>العربية</option>
                            </select>
                        </div>
                    </div>

                    <!-- View Tabs -->
                    <div class="flex gap-2 mb-4">
                        <button onclick="setView('line')" id="btn-line" class="flex-1 py-2 px-4 rounded-lg bg-sky-500 text-white font-medium">
                            <i class="fas fa-align-right ml-1"></i>سطر بسطر
                        </button>
                        <button onclick="setView('para')" id="btn-para" class="flex-1 py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600">
                            <i class="fas fa-paragraph ml-1"></i>فقرة
                        </button>
                        <button onclick="setView('word')" id="btn-word" class="flex-1 py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600">
                            <i class="fas fa-font ml-1"></i>كلمة
                        </button>
                    </div>

                    <div id="output" class="w-full h-52 input-field rounded-xl p-4 overflow-y-auto">
                        <p class="text-slate-500 text-center mt-16">ستظهر الترجمة هنا</p>
                    </div>

                    <!-- Actions -->
                    <div class="flex flex-wrap gap-2 mt-4">
                        <button onclick="copyOutput()" class="flex-1 py-2 px-4 bg-slate-700 rounded-lg hover:bg-slate-600 flex items-center justify-center gap-2">
                            <i class="fas fa-copy text-sky-400"></i>نسخ
                        </button>
                        <button onclick="speakText()" class="flex-1 py-2 px-4 bg-slate-700 rounded-lg hover:bg-slate-600 flex items-center justify-center gap-2">
                            <i class="fas fa-volume-up text-green-400"></i>نطق
                        </button>
                        <button onclick="downloadText()" class="flex-1 py-2 px-4 bg-slate-700 rounded-lg hover:bg-slate-600 flex items-center justify-center gap-2">
                            <i class="fas fa-download text-purple-400"></i>تحميل
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Medical Dictionary Preview -->
        <section class="max-w-6xl mx-auto mt-12">
            <h3 class="text-2xl font-bold text-center mb-6">القاموس الطبي</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="dictionaryPreview"></div>
        </section>
    </main>

    <script>
        // ==================== Medical Dictionary ====================
        const medicalTerms = {
            'diabetes': 'السكري',
            'hypertension': 'ارتفاع ضغط الدم',
            'cancer': 'السرطان',
            'heart disease': 'أمراض القلب',
            'asthma': 'الربو',
            'pneumonia': 'الالتهاب الرئوي',
            'fever': 'حمى',
            'headache': 'صداع',
            'cough': 'سعال',
            'pain': 'ألم',
            'aspirin': 'أسبرين',
            'paracetamol': 'باراسيتامول',
            'insulin': 'أنسولين',
            'antibiotic': 'مضاد حيوي',
            'patient': 'المريض',
            'doctor': 'الطبيب',
            'nurse': 'الممرض',
            'hospital': 'المستشفى',
            'surgery': 'جراحة',
            'examination': 'فحص',
            'x-ray': 'أشعة سينية',
            'blood test': 'تحليل دم'
        };

        let currentView = 'line';
        let translatedText = '';
        let originalText = '';
        let uploadedFiles = [];

        // ==================== Translation ====================
        async function translateText() {
            const input = document.getElementById('inputText').value.trim();
            if (!input && uploadedFiles.length === 0) {
                showNotification('الرجاء إدخال نص', 'warning');
                return;
            }

            showLoading(true);
            
            // Combine input text with file contents
            let allText = input;
            uploadedFiles.forEach(file => {
                if (file.content) allText += '\n\n' + file.content;
            });
            
            originalText = allText;
            
            // Simulate translation delay
            await new Promise(r => setTimeout(r, 1500));
            
            // Perform translation
            translatedText = translateWithDictionary(allText);
            
            // Display
            displayOutput();
            
            showLoading(false);
            showNotification('تمت الترجمة بنجاح!', 'success');
            
            // Save to localStorage
            saveToHistory(allText, translatedText);
        }

        function translateWithDictionary(text) {
            let result = text;
            
            // Apply medical dictionary
            Object.entries(medicalTerms).forEach(([en, ar]) => {
                const regex = new RegExp('\\b' + en + '\\b', 'gi');
                result = result.replace(regex, ar);
            });
            
            // Add header
            return 'الترجمة العربية:\n\n' + result;
        }

        function displayOutput() {
            const output = document.getElementById('output');
            
            if (currentView === 'line') {
                const lines = translatedText.split(/[.!?]+/).filter(l => l.trim());
                output.innerHTML = lines.map(line => `
                    <div class="translation-row rounded-lg p-3 mb-2">
                        <p class="text-white">${line.trim()}</p>
                    </div>
                `).join('');
            } else if (currentView === 'para') {
                output.innerHTML = `<p class="text-white leading-relaxed whitespace-pre-wrap">${translatedText}</p>`;
            } else {
                const words = translatedText.split(/\s+/).filter(w => w);
                output.innerHTML = `<div class="grid grid-cols-2 gap-2">${words.map(w => `
                    <span class="bg-slate-700/50 rounded p-2 text-white">${w}</span>
                `).join('')}</div>`;
            }
        }

        function setView(mode) {
            currentView = mode;
            
            // Update buttons
            ['line', 'para', 'word'].forEach(m => {
                const btn = document.getElementById('btn-' + m);
                if (m === mode) {
                    btn.className = 'flex-1 py-2 px-4 rounded-lg bg-sky-500 text-white font-medium';
                } else {
                    btn.className = 'flex-1 py-2 px-4 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600';
                }
            });
            
            if (translatedText) displayOutput();
        }

        // ==================== File Handling ====================
        async function handleFiles(files) {
            const list = document.getElementById('fileList');
            
            for (let file of files) {
                const item = document.createElement('div');
                item.className = 'bg-slate-700/50 rounded-lg p-3 flex items-center justify-between';
                item.innerHTML = `
                    <div class="flex items-center gap-2">
                        <i class="fas fa-file-medical text-sky-400"></i>
                        <span class="text-sm">${file.name}</span>
                    </div>
                    <span class="status spinner w-4 h-4 border-2 border-sky-500/30 border-t-sky-500 rounded-full"></span>
                `;
                list.appendChild(item);
                
                try {
                    const content = await readFile(file);
                    uploadedFiles.push({ name: file.name, content });
                    item.querySelector('.status').className = 'status text-green-400';
                    item.querySelector('.status').innerHTML = '<i class="fas fa-check"></i>';
                } catch (e) {
                    item.querySelector('.status').className = 'status text-red-400';
                    item.querySelector('.status').innerHTML = '<i class="fas fa-times"></i>';
                }
            }
        }

        function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = e => resolve(e.target.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }

        // ==================== Actions ====================
        function copyOutput() {
            if (!translatedText) return showNotification('لا يوجد نص', 'warning');
            navigator.clipboard.writeText(translatedText).then(() => {
                showNotification('تم النسخ!', 'success');
            });
        }

        function speakText() {
            if (!translatedText) return showNotification('لا يوجد نص', 'warning');
            const utterance = new SpeechSynthesisUtterance(translatedText);
            utterance.lang = 'ar-SA';
            speechSynthesis.speak(utterance);
        }

        function downloadText() {
            if (!translatedText) return showNotification('لا يوجد نص', 'warning');
            const blob = new Blob([translatedText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'translation.txt';
            a.click();
            URL.revokeObjectURL(url);
            showNotification('تم التحميل!', 'success');
        }

        function clearText() {
            document.getElementById('inputText').value = '';
            document.getElementById('wordCount').textContent = '0 كلمة';
            uploadedFiles = [];
            document.getElementById('fileList').innerHTML = '';
        }

        // ==================== Dictionary Preview ====================
        function renderDictionary() {
            const container = document.getElementById('dictionaryPreview');
            const entries = Object.entries(medicalTerms).slice(0, 8);
            container.innerHTML = entries.map(([en, ar]) => `
                <div class="glass rounded-lg p-3 text-center">
                    <p class="text-slate-400 text-sm">${en}</p>
                    <p class="text-sky-400 font-bold">${ar}</p>
                </div>
            `).join('');
        }

        // ==================== History ====================
        function saveToHistory(original, translated) {
            let history = JSON.parse(localStorage.getItem('translations') || '[]');
            history.unshift({
                original: original.substring(0, 100),
                translated: translated.substring(0, 100),
                date: new Date().toLocaleString('ar-SA'),
                fullOriginal: original,
                fullTranslated: translated
            });
            if (history.length > 20) history = history.slice(0, 20);
            localStorage.setItem('translations', JSON.stringify(history));
        }

        // ==================== Utilities ====================
        function showNotification(msg, type) {
            const notif = document.getElementById('notification');
            notif.textContent = msg;
            notif.className = 'notification ' + type;
            notif.classList.add('show');
            setTimeout(() => notif.classList.remove('show'), 3000);
        }

        function showLoading(show) {
            const loading = document.getElementById('loading');
            loading.classList.toggle('hidden', !show);
            loading.classList.toggle('flex', show);
        }

        // Word count
        document.getElementById('inputText').addEventListener('input', function() {
            const count = this.value.trim() ? this.value.trim().split(/\s+/).length : 0;
            document.getElementById('wordCount').textContent = count + ' كلمة';
        });

        // Drag and drop
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('border-sky-500', 'bg-sky-500/10'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('border-sky-500', 'bg-sky-500/10'));
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            dropZone.classList.remove('border-sky-500', 'bg-sky-500/10');
            handleFiles(e.dataTransfer.files);
        });

        // Initialize
        renderDictionary();
    </script>
</body>
</html>ton onclick="exportAs('xlsx')" class="w-full text-right px-4 py-3 hover:bg-slate-700 rounded-b-lg flex items-center gap-2">
                                    <i class="fas fa-file-excel text-green-400"></i>Excel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="max-w-7xl mx-auto mt-16">
            <h2 class="text-3xl font-bold text-center mb-8">المميزات</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="scientific-glass rounded-xl p-6 text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-sky-500/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-brain text-sky-400 text-2xl"></i>
                    </div>
                    <h3 class="font-bold mb-2">ترجمة ذكية</h3>
                    <p class="text-slate-400 text-sm">تستخدم أحدث تقنيات الذكاء الاصطناعي للترجمة الدقيقة</p>
                </div>
                <div class="scientific-glass rounded-xl p-6 text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-file-medical text-green-400 text-2xl"></i>
                    </div>
                    <h3 class="font-bold mb-2">دعم الملفات</h3>
                    <p class="text-slate-400 text-sm">ترجمة ملفات PDF, Word, والصور بكل سهولة</p>
                </div>
                <div class="scientific-glass rounded-xl p-6 text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-purple-500/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-book-medical text-purple-400 text-2xl"></i>
                    </div>
                    <h3 class="font-bold mb-2">قاموس طبي</h3>
                    <p class="text-slate-400 text-sm">يحتوي على آلاف المصطلحات الطبية الدقيقة</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 hidden items-center justify-center">
        <div class="scientific-glass rounded-2xl p-8 text-center">
            <div class="processing-spinner w-16 h-16 border-4 border-sky-500/30 border-t-sky-500 rounded-full mx-auto mb-4"></div>
            <p class="text-xl">جاري الترجمة...</p>
            <p class="text-slate-400 text-sm mt-2">يرجى الانتظار</p>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>